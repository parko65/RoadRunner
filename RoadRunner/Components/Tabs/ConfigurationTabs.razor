@using AutoMapper
@using RoadRunner.Components.Dialogs
@using RoadRunner.Models
@using Service.Contracts
<FluentTab Label="Configuration" Id="configuration">
    <FluentStack>
        <FluentButton Class="tab-button" IconStart="@(new Icons.Regular.Size16.DocumentEdit())" Appearance="Appearance.Lightweight" OnClick="ShowMaterialDefinitionsDialogAsync">Material Definitions</FluentButton>
        <FluentButton Class="tab-button" IconStart="@(new Icons.Regular.Size16.ArrowSwap())" Appearance="Appearance.Lightweight" OnClick="ShowMaterialLoadingDialogAsync">Material Loading</FluentButton>
        <FluentButton Class="tab-button" IconStart="@(new Icons.Regular.Size16.Settings())" Appearance="Appearance.Lightweight" Disabled="true">Options</FluentButton>
        <FluentButton Class="tab-button" IconStart="@(new Icons.Regular.Size16.VehicleTruck())" Appearance="Appearance.Lightweight" Disabled="true">Vehicles</FluentButton>
    </FluentStack>
</FluentTab>

@code {
    [Inject]
    public IDialogService DialogService { get; set; } = default!;

    private Material DialogData = new Material() {
        AggregateForCreation = new AggregateForCreation(),
        BitumenForCreation = new BitumenForCreation(),
        FillerForCreation = new FillerForCreation(),
        AdditiveForCreation = new AdditiveForCreation()
    };

    private async Task ShowMaterialDefinitionsDialogAsync()
    {
        var dialog = await DialogService.ShowDialogAsync(DialogHelper.From<MaterialDefinitionsDialog>(), DialogData, new DialogParameters()
        {
            Height = "800px",
            Width = "930px",
            Title = "Material Definitions",
            PreventDismissOnOverlayClick = true,
            PreventScroll = true            
        });
    }

    private async Task ShowMaterialLoadingDialogAsync()
    {
        var dialog = await DialogService.ShowDialogAsync(DialogHelper.From<MaterialLoadingDialog>(), DialogData, new DialogParameters()
        {
            Height = "800px",
            Width = "930px",
            Title = "Material Loading",
            PreventDismissOnOverlayClick = true,
            PreventScroll = true,
            PrimaryAction = null,
            SecondaryAction = "Close"
        });
    }

    public class Material()
    {
        public AggregateForCreation? AggregateForCreation { get; set; }
        public BitumenForCreation? BitumenForCreation { get; set; }
        public FillerForCreation? FillerForCreation { get; set; }
        public AdditiveForCreation? AdditiveForCreation { get; set; }
    }
}